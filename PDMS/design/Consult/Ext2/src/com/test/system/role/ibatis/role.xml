<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Role">

	<cacheModel id="roleCache" type="LRU">
		<flushInterval hours="24" />
		<property name="size" value="1000" />
	</cacheModel>

	<typeAlias alias="role" type="com.test.system.role.model.RoleModel" />

	<resultMap id="roleResult" class="role">
		<result property="r_id" column="R_ID" />
		<result property="r_name" column="R_NAME" />
		<result property="createtime" column="CREATETIME" />
		<result property="r_desc" column="R_DESC" />
		<result property="status" column="STATUS" />
	</resultMap>

	<insert id="createRole" parameterClass="role">
		insert into T_SYS_ROLE ( R_ID
		<isNotNull prepend="," property="r_name">R_NAME</isNotNull>
		<isNotNull prepend="," property="createtime">
			CREATETIME
		</isNotNull>
		<isNotNull prepend="," property="r_desc">R_DESC</isNotNull>
		<isNotNull prepend="," property="status">STATUS</isNotNull>
		)values( NEXT VALUE FOR T_SYS_ROLE_SEQ
		<isNotNull prepend="," property="r_name">#r_name#</isNotNull>
		<isNotNull prepend="," property="createtime">
			#createtime#
		</isNotNull>
		<isNotNull prepend="," property="r_desc">#r_desc#</isNotNull>
		<isNotNull prepend="," property="status">#status#</isNotNull>
		)
	</insert>

	<update id="updateRole" parameterClass="role">
		update T_SYS_ROLE set R_ID=#r_id#
		<isNotNull prepend="," property="r_name">
			R_NAME=#r_name#
		</isNotNull>
		<isNotNull prepend="," property="createtime">
			CREATETIME=#createtime#
		</isNotNull>
		<isNotNull prepend="," property="r_desc">
			R_DESC=#r_desc#
		</isNotNull>
		<isNotNull prepend="," property="status">
			STATUS=#status#
		</isNotNull>
		where R_ID=#r_id#

	</update>

	<delete id="deleteRole" parameterClass="role">
		delete from T_SYS_ROLE where R_ID=#r_id#
	</delete>

	<select id="getRole" resultMap="roleResult" parameterClass="role">
		select * from T_SYS_ROLE where R_ID=#r_id#
	</select>

	<select id="getRoleList" resultMap="roleResult"
		parameterClass="role">
		select * from T_SYS_ROLE
		<dynamic prepend="where">
			<isNotNull prepend="and" property="r_id">
				R_ID=#r_id#
			</isNotNull>
			<isNotNull prepend="and" property="r_name">
				R_NAME=#r_name#
			</isNotNull>
			<isNotNull prepend="and" property="createtime">
				CREATETIME=#createtime#
			</isNotNull>
			<isNotNull prepend="and" property="r_desc">
				R_DESC=#r_desc#
			</isNotNull>
			<isNotNull prepend="and" property="status">
				STATUS=#status#
			</isNotNull>
		</dynamic>
	</select>

	<select id="getRoleCount" resultClass="int" parameterClass="role">
		select count(*) from T_SYS_ROLE
		<dynamic prepend="where">
			<isNotNull prepend="and" property="r_id">
				R_ID=#r_id#
			</isNotNull>
			<isNotNull prepend="and" property="r_name">
				R_NAME=#r_name#
			</isNotNull>
			<isNotNull prepend="and" property="createtime">
				CREATETIME=#createtime#
			</isNotNull>
			<isNotNull prepend="and" property="r_desc">
				R_DESC=#r_desc#
			</isNotNull>
			<isNotNull prepend="and" property="status">
				STATUS=#status#
			</isNotNull>
		</dynamic>
	</select>

</sqlMap>
