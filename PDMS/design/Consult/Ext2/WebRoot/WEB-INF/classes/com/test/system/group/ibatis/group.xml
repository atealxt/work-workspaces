<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Group">
	
	<cacheModel id="groupCache" type="LRU">
		<flushInterval hours="24"/>
		<property name="size" value="1000" />
	</cacheModel>

	<typeAlias alias="group" type="com.test.system.group.model.GroupModel"/>
	
	<resultMap id="groupResult" class="group">
			<result property="g_id" column="G_ID"/>
			<result property="g_name" column="G_NAME"/>
			<result property="p_gid" column="P_GID"/>
			<result property="createtime" column="CREATETIME"/>
			<result property="g_desc" column="G_DESC"/>
			<result property="g_type" column="G_TYPE"/>
			<result property="status" column="STATUS"/>
		</resultMap>
	
	<insert id="createGroup" parameterClass="group">
		insert into T_GROUP (
						G_ID
							<isNotNull prepend="," property="g_name">
			G_NAME
		</isNotNull>
							<isNotNull prepend="," property="p_gid">
			P_GID
		</isNotNull>
							<isNotNull prepend="," property="createtime">
			CREATETIME
		</isNotNull>
							<isNotNull prepend="," property="g_desc">
			G_DESC
		</isNotNull>
							<isNotNull prepend="," property="g_type">
			G_TYPE
		</isNotNull>
							<isNotNull prepend="," property="status">
			STATUS
		</isNotNull>
					)values(
						#g_id#
							<isNotNull prepend="," property="g_name">
			#g_name#
		</isNotNull>
							<isNotNull prepend="," property="p_gid">
			#p_gid#
		</isNotNull>
							<isNotNull prepend="," property="createtime">
			#createtime#
		</isNotNull>
							<isNotNull prepend="," property="g_desc">
			#g_desc#
		</isNotNull>
							<isNotNull prepend="," property="g_type">
			#g_type#
		</isNotNull>
							<isNotNull prepend="," property="status">
			#status#
		</isNotNull>
					)
	</insert>
		
	<update id="updateGroup" parameterClass="group">
		update T_GROUP set 
						G_ID=#g_id#
							<isNotNull prepend="," property="g_name">
			G_NAME=#g_name#
		</isNotNull>
							<isNotNull prepend="," property="p_gid">
			P_GID=#p_gid#
		</isNotNull>
							<isNotNull prepend="," property="createtime">
			CREATETIME=#createtime#
		</isNotNull>
							<isNotNull prepend="," property="g_desc">
			G_DESC=#g_desc#
		</isNotNull>
							<isNotNull prepend="," property="g_type">
			G_TYPE=#g_type#
		</isNotNull>
							<isNotNull prepend="," property="status">
			STATUS=#status#
		</isNotNull>
					where 
						G_ID=#g_id#
																							
	</update>
	
	<delete id="deleteGroup" parameterClass="group">
		delete from T_GROUP 
		where 
						G_ID=#g_id#
																						</delete>
	
	<select id="getGroup" resultMap="groupResult" parameterClass="group">
		select * from T_GROUP 
		where 
						G_ID=#g_id#
																						</select>
	
	<select id="getGroupList" resultMap="groupResult" parameterClass="group">
		select * from T_GROUP
		<dynamic prepend="where">
			<isNotNull prepend="and" property="g_id">
			G_ID=#g_id#
		</isNotNull>
			<isNotNull prepend="and" property="g_name">
			G_NAME=#g_name#
		</isNotNull>
			<isNotNull prepend="and" property="p_gid">
			P_GID=#p_gid#
		</isNotNull>
			<isNotNull prepend="and" property="createtime">
			CREATETIME=#createtime#
		</isNotNull>
			<isNotNull prepend="and" property="g_desc">
			G_DESC=#g_desc#
		</isNotNull>
			<isNotNull prepend="and" property="g_type">
			G_TYPE=#g_type#
		</isNotNull>
			<isNotNull prepend="and" property="status">
			STATUS=#status#
		</isNotNull>
			</dynamic> 
	</select>
	
	<select id="getGroupCount" resultClass="int" parameterClass="group">
		select count(*) from T_GROUP
		<dynamic prepend="where">
				<isNotNull prepend="and" property="g_id">
				G_ID=#g_id#
			</isNotNull>
				<isNotNull prepend="and" property="g_name">
				G_NAME=#g_name#
			</isNotNull>
				<isNotNull prepend="and" property="p_gid">
				P_GID=#p_gid#
			</isNotNull>
				<isNotNull prepend="and" property="createtime">
				CREATETIME=#createtime#
			</isNotNull>
				<isNotNull prepend="and" property="g_desc">
				G_DESC=#g_desc#
			</isNotNull>
				<isNotNull prepend="and" property="g_type">
				G_TYPE=#g_type#
			</isNotNull>
				<isNotNull prepend="and" property="status">
				STATUS=#status#
			</isNotNull>
			</dynamic> 
	</select>

</sqlMap>
