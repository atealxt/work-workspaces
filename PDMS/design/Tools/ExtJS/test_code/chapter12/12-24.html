<HTML>
 <HEAD>
  <TITLE>自定义文件上传组件示例</TITLE>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="../../extjs2.0/resources/css/ext-all.css" />
  <link rel="stylesheet" type="text/css" href="Ext.ux.form.FileField.css" />
  <script type="text/javascript" src="../../extjs2.0/adapter/ext/ext-base.js"></script>
  <script type="text/javascript" src="../../extjs2.0/ext-all-debug.js"></script>
  <script type="text/javascript" src="../../extjs2.0/source/locale/ext-lang-zh_CN.js"></script>
  <script type="text/javascript" src="Ext.ux.form.FileField.js"></script>
  <script type="text/javascript">
	Ext.onReady(function(){
		Ext.BLANK_IMAGE_URL = '../../extjs2.0/resources/images/default/s.gif';
		Ext.QuickTips.init();
		Ext.form.Field.prototype.msgTarget = 'side';//统一指定错误信息提示方式
		var fileSelector = new Ext.form.FormPanel({
			title:'自定义文件上传组件',
			name:'reportFile',
			fileUpload:	true,//指定表单将要进行文件上传
			frame:true,
			border:false,
			height:130,
			width : 300,
			applyTo:'form-div',
			items:[{
					xtype:'xfilefield',//创建文件上传组件
					allowBlank : false,
					fieldLabel:'文件上传'
			}],
			buttons : [{
				text : '提交表单',
				handler : function(){
					if(fileSelector.form.isValid() == false){
						//表单验证失败
					}else{
						fileSelector.form.doAction('submit',{
							clientValidation:true,
							url:'upload.jsp',
							method:'POST',
							success:function(form,action){
								alert("上传文件成功。");
							},
							failure:function(form,action){
								alert("上传文件失败！");
							}
						});
					}
				}
			}]
		});
	});
  </script>
 </HEAD>
 <BODY style="margin=10 10 10 10;">
	<div id='form-div'></div>
 </BODY>
</HTML>