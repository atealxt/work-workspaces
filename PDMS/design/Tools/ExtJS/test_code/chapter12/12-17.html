<HTML>
 <HEAD>
  <TITLE>Ext.tree.TreeLoader示例</TITLE>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="stylesheet" type="text/css" href="../../extjs2.0/resources/css/ext-all.css" />
  <script type="text/javascript" src="../../extjs2.0/adapter/ext/ext-base.js"></script>
  <script type="text/javascript" src="../../extjs2.0/ext-all.js"></script>
  <script type="text/javascript" src="../../extjs2.0/source/locale/ext-lang-zh_CN.js"></script>
  <script type="text/javascript">
	Ext.onReady(function(){
		//创建根节点
		var root = new Ext.tree.AsyncTreeNode({
			text : '菜单根节点',
			expanded : true,//设置根节点默认是展开的
			id : 'root'
		});
		//创建Tree面板组件
		var tree = new Ext.tree.TreePanel({
			tbar : [{
				 text : '取得被选节点',
				 handler : function(){
					var sm = tree.getSelectionModel();//取得树的选择模式对象
					var node = sm.getSelectedNode();//取得当前选中的节点
					alert('自定义属性cust：' + node.attributes.cust);
				 }
			},{
				text : '重新加载',
				handler : function(){
					var loader = tree.getLoader();//取得树加载器
					loader.load(root,function(){
						root.expand();//重新加载后展开根节点
					});//重新加载根节点
				}
			}],
			//设置异步树节点的数据加载器
			loader : new Ext.tree.TreeLoader({
				baseAttrs : {//设置子节点的基本属性
					 cust : 'client'
				},
				dataUrl : 'AsyncTreeNodeServer.jsp'//设置请求地址
			}),
			title : 'TreeLoader示例',
			width : 200,
			height : 150,
			applyTo : 'tree-div',
			root : root
		});
	});
  </script>
 </HEAD>
 <BODY style="margin=10 10 10 10;">
	<div id="tree-div"/>
 </BODY>
</HTML>